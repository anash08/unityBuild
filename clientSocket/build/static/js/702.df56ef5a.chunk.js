(self.webpackChunkclient=self.webpackChunkclient||[]).push([[702],{8702:function(t,e,r){var n=r(7424).default,s=r(7061).default,i=r(2122).default,o=r(3344).default,u=r(7156).default,a=r(6690).default,c=r(9728).default,p=r(8186).default,f=r(6737).default,l=r(8131).default,h=r(8237).default,d=r(7523),v=r(1060),x=r(1634),w=r(4189),m=r(4973),y=function(){"use strict";function t(e){a(this,t),this.auth=e.auth,this.userAgent=e.userAgent||"replicate-javascript/".concat(m.version),this.baseUrl=e.baseUrl||"https://api.replicate.com/v1",this.fetch=e.fetch||fetch,this.collections={get:d.get.bind(this)},this.models={get:v.get.bind(this),versions:{list:v.versions.list.bind(this),get:v.versions.get.bind(this)}},this.predictions={create:x.create.bind(this),get:x.get.bind(this),list:x.list.bind(this)},this.trainings={create:w.create.bind(this),get:w.get.bind(this),cancel:w.cancel.bind(this)}}return c(t,[{key:"run",value:function(){var t=u(s().mark((function t(e,r){var n,u,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o(/^([a-zA-Z0-9-_]+?)\/([a-zA-Z0-9-_]+?):([0-9a-fA-F]+)$/,{owner:1,name:2,version:3}),(u=e.match(n))&&u.groups){t.next=4;break}throw new Error('Invalid version. It must be in the format "owner/name:version"');case 4:return a=u.groups.version,t.next=7,this.predictions.create(i(i({wait:!0},r),{},{version:a}));case 7:if("failed"!==(c=t.sent).status){t.next=10;break}throw new Error("Prediction failed: ".concat(c.error));case 10:return t.abrupt("return",c.output);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"request",value:function(){var t=u(s().mark((function t(e,r){var i,o,u,a,c,p,f,l,h,d,v;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.auth,o=this.baseUrl,u=this.userAgent,a=new URL(e.startsWith("/")?e.slice(1):e,o.endsWith("/")?o:"".concat(o,"/")),c=r.method,p=void 0===c?"GET":c,f=r.params,l=void 0===f?{}:f,h=r.data,Object.entries(l).forEach((function(t){var e=n(t,2),r=e[0],s=e[1];a.searchParams.append(r,s)})),d={Authorization:"Token ".concat(i),"Content-Type":"application/json","User-Agent":u},t.next=7,this.fetch(a,{method:p,headers:d,body:h?JSON.stringify(h):void 0});case 7:if((v=t.sent).ok){t.next=10;break}throw new Error("API request failed: ".concat(v.statusText));case 10:return t.abrupt("return",v.json());case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"paginate",value:function(t){var e=this;return p(s().mark((function r(){var n,i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f(t());case 2:return n=r.sent,r.next=5,n.results;case 5:if(!n.next){r.next=8;break}return i=function(){return e.request(n.next,{method:"GET"})},r.delegateYield(l(h(e.paginate(i)),f),"t0",8);case 8:case"end":return r.stop()}}),r)})))()}},{key:"wait",value:function(){var t=u(s().mark((function t(e,r){var n,i,o,u,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.id){t.next=3;break}throw new Error("Invalid prediction");case 3:if("succeeded"!==e.status&&"failed"!==e.status&&"canceled"!==e.status){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,this.predictions.get(n);case 7:i=t.sent,o=function(t){return new Promise((function(e){return setTimeout(e,t)}))},u=0,a=r.interval||250,c=r.maxAttempts||null;case 12:if("succeeded"===i.status||"failed"===i.status||"canceled"===i.status){t.next=23;break}if(u+=1,!(c&&u>c)){t.next=16;break}throw new Error("Prediction ".concat(n," did not finish after ").concat(c," attempts"));case 16:return t.next=18,o(a);case 18:return t.next=20,this.predictions.get(e.id);case 20:i=t.sent,t.next=12;break;case 23:if("failed"!==i.status){t.next=25;break}throw new Error("Prediction failed: ".concat(i.error));case 25:return t.abrupt("return",i);case 26:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),t}();t.exports=y},7523:function(t,e,r){var n=r(7061).default,s=r(7156).default;function i(){return(i=s(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/collections/".concat(e),{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}t.exports={get:function(t){return i.apply(this,arguments)}}},1060:function(t,e,r){var n=r(7061).default,s=r(7156).default;function i(){return(i=s(n().mark((function t(e,r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/models/".concat(e,"/").concat(r),{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function o(){return(o=s(n().mark((function t(e,r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/models/".concat(e,"/").concat(r,"/versions"),{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function u(){return(u=s(n().mark((function t(e,r,s){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/models/".concat(e,"/").concat(r,"/versions/").concat(s),{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}t.exports={get:function(t,e){return i.apply(this,arguments)},versions:{list:function(t,e){return o.apply(this,arguments)},get:function(t,e,r){return u.apply(this,arguments)}}}},1634:function(t,e,r){var n=r(7061).default,s=r(215).default,i=r(7156).default,o=["wait"];function u(){return(u=i(n().mark((function t(e){var r,i,u,a,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.wait,i=s(e,o),u=this.request("/predictions",{method:"POST",data:i}),!r){t.next=10;break}return a=r.maxAttempts,c=r.interval,t.t0=this,t.next=7,u;case 7:return t.t1=t.sent,t.t2={maxAttempts:a,interval:c},t.abrupt("return",t.t0.wait.call(t.t0,t.t1,t.t2));case 10:return t.abrupt("return",u);case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function a(){return(a=i(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/predictions/".concat(e),{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function c(){return(c=i(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/predictions",{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}t.exports={create:function(t){return u.apply(this,arguments)},get:function(t){return a.apply(this,arguments)},list:function(){return c.apply(this,arguments)}}},4189:function(t,e,r){var n=r(7061).default,s=r(3012).default,i=r(7156).default;function o(){return(o=i(n().mark((function t(e,r,i,o){var u,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object.assign({},(s(o),o)),a=this.request("/models/".concat(e,"/").concat(r,"/versions/").concat(i,"/trainings"),{method:"POST",data:u}),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function u(){return(u=i(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/trainings/".concat(e),{method:"GET"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function a(){return(a=i(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/trainings/".concat(e,"/cancel"),{method:"POST"}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}t.exports={create:function(t,e,r,n){return o.apply(this,arguments)},get:function(t){return u.apply(this,arguments)},cancel:function(t){return a.apply(this,arguments)}}},4642:function(t,e,r){var n=r(3801);function s(t){var e,r;function s(e,r){try{var o=t[e](r),u=o.value,a=u instanceof n;Promise.resolve(a?u.v:u).then((function(r){if(a){var n="return"===e?"return":"next";if(!u.k||r.done)return s(n,r);r=t[n](r).value}i(o.done?"return":"normal",r)}),(function(t){s("throw",t)}))}catch(c){i("throw",c)}}function i(t,n){switch(t){case"return":e.resolve({value:n,done:!0});break;case"throw":e.reject(n);break;default:e.resolve({value:n,done:!1})}(e=e.next)?s(e.key,e.arg):r=null}this._invoke=function(t,n){return new Promise((function(i,o){var u={key:t,arg:n,resolve:i,reject:o,next:null};r?r=r.next=u:(e=r=u,s(t,n))}))},"function"!=typeof t.return&&(this.return=void 0)}s.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},s.prototype.next=function(t){return this._invoke("next",t)},s.prototype.throw=function(t){return this._invoke("throw",t)},s.prototype.return=function(t){return this._invoke("return",t)},t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},3801:function(t){t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},8131:function(t,e,r){var n=r(3801);t.exports=function(t){var e={},r=!1;function s(e,s){return r=!0,s=new Promise((function(r){r(t[e](s))})),{done:!1,value:new n(s,1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return r?(r=!1,t):s("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(r)throw r=!1,t;return s("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return r?(r=!1,t):s("return",t)}),e},t.exports.__esModule=!0,t.exports.default=t.exports},8237:function(t){function e(t){function r(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return e=function(t){this.s=t,this.n=t.next},e.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(t){var e=this.s.return;return void 0===e?Promise.resolve({value:t,done:!0}):r(e.apply(this.s,arguments))},throw:function(t){var e=this.s.return;return void 0===e?Promise.reject(t):r(e.apply(this.s,arguments))}},new e(t)}t.exports=function(t){var r,n,s,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,s=Symbol.iterator);i--;){if(n&&null!=(r=t[n]))return r.call(t);if(s&&null!=(r=t[s]))return new e(r.call(t));n="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},6737:function(t,e,r){var n=r(3801);t.exports=function(t){return new n(t,0)},t.exports.__esModule=!0,t.exports.default=t.exports},3012:function(t){t.exports=function(t){if(null==t)throw new TypeError("Cannot destructure "+t)},t.exports.__esModule=!0,t.exports.default=t.exports},215:function(t,e,r){var n=r(7071);t.exports=function(t,e){if(null==t)return{};var r,s,i=n(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i},t.exports.__esModule=!0,t.exports.default=t.exports},7071:function(t){t.exports=function(t,e){if(null==t)return{};var r,n,s={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(s[r]=t[r]);return s},t.exports.__esModule=!0,t.exports.default=t.exports},8186:function(t,e,r){var n=r(4642);t.exports=function(t){return function(){return new n(t.apply(this,arguments))}},t.exports.__esModule=!0,t.exports.default=t.exports},4973:function(t){"use strict";t.exports=JSON.parse('{"name":"replicate","version":"0.9.3","description":"JavaScript client for Replicate","repository":"github:replicate/replicate-javascript","homepage":"https://github.com/replicate/replicate-javascript#readme","bugs":"https://github.com/replicate/replicate-javascript/issues","license":"Apache-2.0","main":"index.js","scripts":{"lint":"eslint .","test":"jest"},"devDependencies":{"@types/jest":"^29.5.0","@typescript-eslint/eslint-plugin":"^5.56.0","cross-fetch":"^3.1.5","eslint":"^8.36.0","eslint-config-airbnb-base":"^15.0.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jest":"^27.2.1","eslint-plugin-jsdoc":"^40.1.0","eslint-plugin-n":"^15.6.1","eslint-plugin-promise":"^6.1.1","jest":"^29.5.0","nock":"^13.3.0","ts-jest":"^29.1.0","typescript":"^5.0.2"}}')}}]);
//# sourceMappingURL=702.df56ef5a.chunk.js.map